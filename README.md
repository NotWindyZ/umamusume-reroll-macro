# üê¥ Uma Musume Reroll Macro

A GUI-based automation macro for **Uma Musume Pretty Derby**

[![Release](https://img.shields.io/github/v/release/NotWindyZ/umamusume-reroll-macro?style=for-the-badge)](https://github.com/NotWindyZ/umamusume-reroll-macro/releases)
[![Downloads](https://img.shields.io/github/downloads/NotWindyZ/umamusume-reroll-macro/total?style=for-the-badge)](https://github.com/NotWindyZ/umamusume-reroll-macro/releases)
[![License](https://img.shields.io/github/license/NotWindyZ/umamusume-reroll-macro?style=for-the-badge)](LICENSE)
[![Issues](https://img.shields.io/github/issues/NotWindyZ/umamusume-reroll-macro?style=for-the-badge)](https://github.com/NotWindyZ/umamusume-reroll-macro/issues)
[![Made with Python](https://img.shields.io/badge/Made%20with-Python-3776AB?style=for-the-badge&logo=python)](https://www.python.org/)

[![GitHub stars](https://img.shields.io/github/stars/NotWindyZ/umamusume-reroll-macro?style=for-the-badge&color=yellow)](https://github.com/NotWindyZ/umamusume-reroll-macro/stargazers)
[![Discord](https://img.shields.io/badge/Discord-%40notwindybee__-5865F2?style=for-the-badge&logo=discord&logoColor=white)](https://discord.com)

## üì• Download

üëâ [**Download the latest release here**](https://github.com/NotWindyZ/umamusume-reroll-macro/releases)

Simply extract the folder, then run `start_macro.bat` (inside the MACRO_HERE_OPEN_IT folder). No Python installation required! For further instruction please ahead to "üöÄ How to Use" section!

---

## ‚ú® Features

-  Automated rerolling & account registration  
-  Easy region/click assignment via GUI  
-  OCR-based rarity detection using EasyOCR  
-  Discord webhook notifications (with screenshots)  
-  Macro failsafe check 

### ‚å®Ô∏è Hotkeys
- **F1** ‚Üí Start macro  
- **F3** ‚Üí Stop macro
  
---

## üñ•Ô∏è Requirements

- Windows 10/11  
- Python 3.12 (**embedded, already included in release folder**)
---

## üöÄ How to Use

1. **Extract the release folder** anywhere you like.
2. **Start the macro:**
   - Double-click `start_macro.bat` (located in "MACRO_HERE_OPEN_IT" folder)
   - _Tip: Create a desktop shortcut to `start_macro.bat` for quick access!_ (RECOMMENDED)
3. The macro GUI will open. Assign all required regions and clicks using the GUI tabs:
   - **Card regions** (for rarity detection)
   - **Macro reroll clicks**
   - **Register account clicks**
   - **In-game menu clicks**
   - **Safe check regions**
   - **Link account clicks**
   - Use the ‚ÄúAssign‚Äù buttons to snip or set coordinates for each action.
4. **Set up Discord webhook (optional):**
   - Enter your Discord webhook URL and (optionally) a user ID to ping in the Webhook tab.
   - Click ‚ÄúSend Test Notification‚Äù to verify.
5. **Start/Stop the Macro:**
   - Press `F1` to start, `F3` to stop, or use the GUI buttons.

---
## Macro Assignment Tutorial (IMPORTANT!!!!!!!!!!)
Go to "Reroll" tab of the macro (Make sure you have to be on fullscreen mode before doing this!!)

---

### Section 1: "Macro Reroll Clicks"
For the "Reroll" section, this only has 3 things to assign:

<p align="center">
  <img src="https://i.postimg.cc/G23DcxL2/image.png" width="600" />
  <br>
  <sub><b>Step 1.1:</b> Menu List button should be at bottom right at the start menu ‚Üí assign it.</sub>
</p>

<p align="center">
  <img src="https://i.postimg.cc/hPCSJFLc/image.png" width="600" />
  <br>
  <sub><b>Step 1.2:</b> "Delete User Data" ‚Üí choose the one that says "Delete User Data".</sub>
</p>

<p align="center">
  <img src="https://i.postimg.cc/GhRQ4Vc7/image.png" width="600" />
  <br>
  <sub><b>Step 1.3:</b> Confirm button for delete data.</sub>
</p>

<p align="center">
  <img src="https://i.postimg.cc/d0LqY5pn/image.png" width="400" />
  <br>
  <sub><b>Step 1.3.1:</b> BTW you gotta click "Save Reroll", so keep this in mind and make sure to save every section you have done assigned!</sub>
</p>

So after you have done, click the right arrow to navigate to 'Register' section. And now you have to create your new fresh account by delete user data as step 1.3 (Make sure your main account has been LINKED BEFORE. I'm not taking responsible for your lost account as you aware of doing this!) 

<p align="center">
  <img src="https://i.postimg.cc/wjpj85Qs/image.png" width="600" />
  <br>
  <sub><b>Step 1.4:</b> Term Of Consent box.</sub>
</p>

<p align="center">
  <img src="https://i.postimg.cc/pVKNNwGq/image.png" width="600" />
  <img src="https://i.postimg.cc/Wz10nLhT/image.png" width="600" />
  <br>
  <sub><b>Step 1.5:</b> Country region assign</sub>
</p>

<p align="center">
  <img src="https://i.postimg.cc/ZKhW4hTR/image.png" width="600" />
  <br>
  <sub><b>Step 1.6:</b> Age confirmation.</sub>
</p>

<p align="center">
  <img src="https://i.postimg.cc/4NzBxZVF/image.png" width="600" />
  <br>
  <sub><b>Step 1.7:</b> Trainer Registration</sub>
</p>

<p align="center">
  <img src="https://i.postimg.cc/J4rC8TBJ/image.png" width="350" />
  <br>
  <sub><b>Step 1.7.1:</b> Again... make sure to click save as the current section you are assigned (I won't mention this further so take note about it)</sub>
</p>

So after you have registered your test account, there will be an early game intro:

<p align="center">
  <img src="https://i.postimg.cc/fRS2QX5m/image.png" width="450" />
  <br>
  <sub><b>Step 2:</b> You can easily find the forward button (Similar to Youtube forward button) so please assign it when the intro is ongoing!</sub>
</p>

<p align="center">
  <img src="https://i.postimg.cc/VLCnYRQf/image.png" width="400" />
  <img src="https://i.postimg.cc/qMywm07x/image.png" width="450" />
  <br>
  <sub><b>Step 2.1:</b> Gift icons, Collect All button</sub>
</p>

<p align="center">
  <img src="https://i.postimg.cc/zvR7YYF5/image.png" width="450" />
  <br>
  <sub><b>Step 2.2:</b> Scout menu</sub>
</p>

<p align="center">
  <img src="https://i.postimg.cc/qRpH7QZ9/image.png" width="450" />
  <br>
  <sub><b>Step 2.3:</b> Support banner and "x10 Scout"</sub>
</p>

<p align="center">
  <img src="https://i.postimg.cc/SxcPzC8q/image.png" width="450" />
  <br>
  <sub><b>Step 2.4:</b> Confirm Scout</sub>
</p>

<p align="center">
  <img src="https://i.postimg.cc/VvcgwHGC/image.png" width="450" />
  <br>
  <sub><b>Step 2.5:</b> Banner right arrow and title screen (Support card banner position click by telling how many click it click the in game right arrow to navigate to support card banner)</sub>
</p>

<p align="center">
  <img src="https://i.postimg.cc/Ls8rN0FH/image.png" width="450" />
  <br>
  <sub><b>Step 2.6:</b> Now do one x10 scout and assign for the "Scout Again" button</sub>
</p>

<p align="center">
  <img src="https://i.postimg.cc/VsnHBc0q/image.png" width="450" />
  <br>
  <sub><b>Step 2.6.1:</b> Save "In-game" assign click (lasty of last I swear...)</sub>
</p>

Now move on to the last one "Link Account" assign:

<p align="center">
  <img src="https://i.postimg.cc/7h93sXkk/image.png" width="450" />
  <img src="https://i.postimg.cc/VN0Ffjjq/image.png" width="450" />
  <br>
  <sub><b>Step 3:</b> Profile button and the profile next button (it should be appear when you open the profile first time)</sub>
</p>

<p align="center">
  <img src="https://i.postimg.cc/NjS1z5W5/image.png" width="450" />
  <img src="https://i.postimg.cc/52YzLf61/image.png" width="450" />
  <br>
  <sub><b>Step 3.1:</b> Copy Trainer Id and Data Link button. Click "Data Link" button and assign the Data Link confirm also</sub>
</p>

<p align="center">
  <img src="https://i.postimg.cc/fyPLR07d/image.png" width="450" />
  <img src="https://i.postimg.cc/Pqdth4Gc/image.png" width="450" />
  <br>
  <sub><b>Step 3.2:</b> Click confirm and you will assign "Set" button next. Click confirm "Set" again and assign 4 remainings one (self-explanatory) </sub>
</p>

<p align="center">
  <img src="https://i.postimg.cc/x13XKqnw/image.png" width="350" />
  <br>
  <sub><b>Step 3.2.1:</b> Save the "Link Account Clicks" </sub>
</p>

---

### Section 2: "Assign Card Regions"
Now, close the window that assign those macro clicks, click "Assign Card Regions" and you should able to see card snipping window


<p align="center">
  <img src="https://i.postimg.cc/bJSmdwv4/image.png" width="350" />
  <img src="https://i.postimg.cc/s2kp69V0/image.png" width="250" />
  <br>
  <sub><b>Assign Card Regions</b></sub>
</p>

This is quite easy to do if you watch this short gif below and do it carefully to ensure the macro can be detect each card rarity correctly:

[![1.gif](https://i.postimg.cc/nVyPj5NN/1.gif)](https://postimg.cc/jChXB8xh)

---

### Section 3: "Save Assigned Regions"
<p align="center">
  <img src="https://i.imgur.com/example3.gif" width="400" />
</p>





---

## üìù Notes

- On first run, a default `config.ini` will be created if missing. _If you lose or delete it, just restart the macro!_
- All configuration is saved in `config.ini` and can be edited via the GUI.
- Screenshots for Discord notifications are saved temporarily and deleted after sending.
- For best OCR results, assign card regions as tightly as possible around the card rarity icons.
- The macro will not run unless all required regions/clicks are assigned.
- All logs are saved to `macro_log.txt` (rotates at 5MB) and successful reroll accounts to `met_required_accounts.txt` (rotates at 10MB).

---

## ‚ö° Optional: Enable GPU Support for Faster OCR

By default, the macro uses CPU for EasyOCR. This is fine for most users, but it can be a little slow.  
If you have an **NVIDIA GPU with CUDA support**, you can install **PyTorch with CUDA** inside the embedded Python environment to make OCR much faster.

‚ö†Ô∏è **Warning:** Installing GPU support will download about **7 GB** of data.

> Just locate the bat file: **`install-ocr-gpu-support.bat`** (located in "MACRO_HERE_OPEN_IT" folder)

> After everything about gpu support for macro is finished, make sure to close and reopen the macro to take affect!
---
## üõ†Ô∏è Troubleshooting & Common Problems

- **`config.ini` missing or corrupted?**  
  The macro will auto-create a default `config.ini` on startup. Just restart the macro.

- **OCR not working or inaccurate?**  
  - Make sure your screen is scaled (100% recommended).
  - Nvidia GPU for faster card detection
  - If OCR fails to load, try reinstalling EasyOCR or ensure your graphics drivers are up to date.
  - For best results, assign card regions closely around the rarity icons.

- **Macro doesn't detect the game window?**  
  - The game must be running and visible!
  - Fullscreen on the game also!

- **Discord notifications not sending?**  
  - Double-check your Discord webhook URL.

- **Can't find `start_macro.bat`?**  
  - If missing, create a `.bat` file with the following content in the "MACRO_HERE_OPEN_IT" folder:
    ```bat
    @echo off
    REM === Disable QuickEdit Mode for current CMD session ===
    REG ADD "HKCU\Console" /v QuickEdit /t REG_DWORD /d 0 /f >nul 2>&1
    
    REM === Always go into MACRO_HERE_OPEN_IT folder first ===
    cd /d "%~dp0"
    
    REM === Run main.py with the root python.exe (one level up) ===
    "..\python.exe" "main.py"
    
    echo.
    echo Macro finished running.
    pause

    ```
  - Then create a shortcut to this `.bat` on your desktop for easy access.

---

## üì¶ Included Python Modules (for reference)

The macro uses the following Python modules (already included in the embedded Python):

- autoit
- opencv-python
- easyocr
- keyboard
- numpy
- pygetwindow
- pyperclip
- pillow
- requests
- ttkbootstrap

---

Enjoy rerolling! For issues or suggestions, open an issue on GitHub or contact [@notwindybee_](https://discord.com/users/youridhere) on Discord.
